var Sylvester={version:"0.1.3",precision:1e-6};function Matrix(){}Matrix.prototype={dup:function(){return Matrix.create(this.elements)},canMultiplyFromLeft:function(e){var t=e.elements||e;return void 0===t[0][0]&&(t=Matrix.create(t).elements),this.elements[0].length==t.length},multiply:function(e){var t=!!e.modulus,o=e.elements||e;if(void 0===o[0][0]&&(o=Matrix.create(o).elements),!this.canMultiplyFromLeft(o))return null;var n,r,a,i,s,l,u=this.elements.length,c=u,f=o[0].length,m=this.elements[0].length,d=[];do{d[n=c-u]=[],r=f;do{a=f-r,i=0,s=m;do{l=m-s,i+=this.elements[n][l]*o[l][a]}while(--s);d[n][a]=i}while(--r)}while(--u);return o=Matrix.create(d),t?o.col(1):o},isSquare:function(){return this.elements.length==this.elements[0].length},toRightTriangular:function(){var e,t,o,n,r=this.dup(),a=this.elements.length,i=a,s=this.elements[0].length;do{if(t=i-a,0===r.elements[t][t])for(j=t+1;j<i;j++)if(0!==r.elements[j][t]){e=[],o=s;do{n=s-o,e.push(r.elements[t][n]+r.elements[j][n])}while(--o);r.elements[t]=e;break}if(0!==r.elements[t][t])for(j=t+1;j<i;j++){var l=r.elements[j][t]/r.elements[t][t];e=[],o=s;do{n=s-o,e.push(n<=t?0:r.elements[j][n]-r.elements[t][n]*l)}while(--o);r.elements[j]=e}}while(--a);return r},determinant:function(){if(!this.isSquare())return null;var e,t=this.toRightTriangular(),o=t.elements[0][0],n=t.elements.length-1,r=n;do{e=r-n+1,o*=t.elements[e][e]}while(--n);return o},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=e.elements||e;void 0===t[0][0]&&(t=Matrix.create(t).elements);var o,n,r,a=this.dup(),i=a.elements[0].length,s=a.elements.length,l=s,u=t[0].length;if(s!=t.length)return null;do{o=l-s,n=u;do{r=u-n,a.elements[o][i+r]=t[o][r]}while(--n)}while(--s);return a},inverse:function(){if(!this.isSquare()||this.isSingular())return null;var e,t,o,n,r,a,i,s=this.elements.length,l=s,u=this.augment(Matrix.I(s)).toRightTriangular(),c=u.elements[0].length,f=[];do{r=[],o=c,f[e=s-1]=[],a=u.elements[e][e];do{n=c-o,i=u.elements[e][n]/a,r.push(i),n>=l&&f[e].push(i)}while(--o);for(u.elements[e]=r,t=0;t<e;t++){r=[],o=c;do{n=c-o,r.push(u.elements[t][n]-u.elements[e][n]*u.elements[t][e])}while(--o);u.elements[t]=r}}while(--s);return Matrix.create(f)},setElements:function(e){var t,o=e.elements||e;if(void 0!==o[0][0]){var n,r,a,i=o.length,s=i;this.elements=[];do{r=n=o[t=s-i].length,this.elements[t]=[];do{a=r-n,this.elements[t][a]=o[t][a]}while(--n)}while(--i);return this}var l=o.length,u=l;this.elements=[];do{t=u-l,this.elements.push([o[t]])}while(--l);return this}},Matrix.create=function(e){return(new Matrix).setElements(e)},Matrix.I=function(e){var t,o,n,r=[],a=e;do{r[t=a-e]=[],o=a;do{n=a-o,r[t][n]=t==n?1:0}while(--o)}while(--e);return Matrix.create(r)},PureCSSMatrix=function(){"use strict";var e=/deg$/,t=/([0-9.\-e]+)/g,o=/([a-zA-Z]+)\(([^\)]+)\)/g;function n(e){e&&null!==e&&"none"!=e?e instanceof Matrix?this.setMatrix(e):this.setMatrixValue(e):this.m=Matrix.I(3)}function r(t){var o=parseFloat(a(t));return t.match(e)&&(o=2*Math.PI*o/360),o}function a(e){return e.match(t)}function i(e){return Number(e).toFixed(6)}return n.prototype.setMatrix=function(e){this.m=e},n.prototype.setMatrixValue=function(e){for(var t,n=Matrix.I(3);null!==(t=o.exec(e));){var i,s=t[1].toLowerCase(),l=t[2].split(",");if("matrix"==s)i=Matrix.create([[parseFloat(l[0]),parseFloat(l[2]),parseFloat(a(l[4]))],[parseFloat(l[1]),parseFloat(l[3]),parseFloat(a(l[5]))],[0,0,1]]);else if("translate"==s)(i=Matrix.I(3)).elements[0][2]=parseFloat(a(l[0])),i.elements[1][2]=parseFloat(a(l[1]));else if("scale"==s){var u,c=parseFloat(l[0]);u=l.length>1?parseFloat(l[1]):c,i=Matrix.create([[c,0,0],[0,u,0],[0,0,1]])}else"rotate"==s?i=Matrix.RotationZ(r(l[0])):"skew"==s||"skewx"==s?(i=Matrix.I(3)).elements[0][1]=Math.tan(r(l[0])):"skewy"==s?(i=Matrix.I(3)).elements[1][0]=Math.tan(r(l[0])):console.log("Problem with setMatrixValue",s,l);n=n.multiply(i)}this.m=n},n.prototype.multiply=function(e){return new n(this.m.multiply(e.m))},n.prototype.inverse=function(){return Math.abs(this.m.elements[0][0])<1e-6&&(this.m.elements[0][0]=0),new n(this.m.inverse())},n.prototype.translate=function(e,t){var o=Matrix.I(3);return o.elements[0][2]=e,o.elements[1][2]=t,new n(this.m.multiply(o))},n.prototype.scale=function(e,t){var o=Matrix.create([[e,0,0],[0,t,0],[0,0,1]]);return new n(this.m.multiply(o))},n.prototype.rotate=function(e){var t=Matrix.RotationZ(e);return new n(this.m.multiply(t))},n.prototype.toString=function(){var e=this.m.elements,t="";return($.browser.mozilla||$.browser.opera)&&(t="px"),"matrix("+i(e[0][0])+", "+i(e[1][0])+", "+i(e[0][1])+", "+i(e[1][1])+", "+i(e[0][2])+t+", "+i(e[1][2])+t+")"},n.prototype.elements=function(){var e=this.m.elements;return{a:e[0][0],b:e[1][0],c:e[0][1],d:e[1][1],e:e[0][2],f:e[1][2]}},n}(),$.zoomooz||($.zoomooz={}),$.zoomooz.helpers=function(e,t){"use strict";var o=["-moz-","-webkit-","-o-","-ms-"];return t.forEachPrefix=function(e,t){for(var n=0;n<o.length;n++)e(o[n]);t&&e("")},t.getElementTransform=function(o){var n;return t.forEachPrefix(function(t){n=n||e(o).css(t+"transform")},!0),n},t}(jQuery,{}),function(e){"use strict";var t,o,n,r=/([0-9.\-e]+)/g,a=/([a-z]+)\(([^\)]+)\)/g,i=/deg$/,s=e.zoomooz.helpers,l={duration:450,easing:"ease",nativeanimation:!1};function u(e,t,o){var n,r={};if(s.forEachPrefix(function(t){r[t+"transform"]=e},!0),t){var a=p(t/1e3,6)+"s";r["-webkit-transition-duration"]=a,r["-o-transition-duration"]=a,r["-moz-transition-duration"]=a}if(o){var i=(n=o)instanceof Array?"cubic-bezier("+p(n[0],6)+","+p(n[1],6)+","+p(n[2],6)+","+p(n[3],6)+")":n;r["-webkit-transition-timing-function"]=i,r["-o-transition-timing-function"]=i,r["-moz-transition-timing-function"]=i}return r}function c(e,n,r,a,i){var s,l=(new Date).getTime()-t;s=a.easingfunction?a.easingfunction(l/a.duration):l/a.duration,e.css(u(m(function(e,t,o){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]+(t[r]-e[r])*o);return n}(n,r,s)))),l>a.duration&&(clearInterval(o),o=null,s=1,i&&i())}function f(e){var t=e.elements(),o=t.a,n=t.b,r=t.c,a=t.d,i=t.e,s=t.f;if(!(Math.abs(o*a-n*r)<.001)){var l=i,u=s,c=Math.sqrt(o*o+n*n),f=(o/=c)*r+(n/=c)*a;r-=o*f,a-=n*f;var m=Math.sqrt(r*r+a*a);return f/=m,o*(a/=m)-n*(r/=m)<0&&(o=-o,n=-n,r=-r,a=-a,c=-c,m=-m),{tx:l,ty:u,r:Math.atan2(n,o),k:Math.atan(f),sx:c,sy:m}}console.log("fail!")}function m(e){var t="";return t+="translate("+p(e.tx,6)+"px,"+p(e.ty,6)+"px) ",t+="rotate("+p(e.r,6)+"rad) skewX("+p(e.k,6)+"rad) ",t+="scale("+p(e.sx,6)+","+p(e.sy,6)+")"}function d(e,t){var o,n=s.getElementTransform(e);o=n?new PureCSSMatrix(n):new PureCSSMatrix,t&&(o=o.translate(t.x,t.y));var l=f(o);return l.r=function(e){var t,o=0;for(;null!==(t=a.exec(e));){var n=t[1].toLowerCase(),s=t[2].split(",");if("matrix"==n){var l=n+"("+t[2]+")";o+=f(new PureCSSMatrix(l)).r}else if("rotate"==n){var u=s[0],c=parseFloat(u.match(r));u.match(i)&&(c=2*Math.PI*c/360),o+=c}}return o}(n),l}function h(e,t){if(Math.abs(e.r-t.r)>Math.PI)if(t.r<e.r)for(;Math.abs(e.r-t.r)>Math.PI;)t.r+=2*Math.PI;else for(;Math.abs(e.r-t.r)>Math.PI;)t.r-=2*Math.PI;return t}function p(e,t){t=Math.abs(parseInt(t,10))||0;var o=Math.pow(10,t);return Math.round(e*o)/o}jQuery.cssHooks.MsTransform={set:function(e,t){e.style.msTransform=t}},jQuery.cssHooks.MsTransformOrigin={set:function(e,t){e.style.msTransformOrigin=t}},e.fn.animateTransformation=function(r,a,i,s,p){a=jQuery.extend({},l,a),n&&(clearTimeout(n),n=null),a.nativeanimation&&s&&(n=setTimeout(s,a.duration)),this.each(function(){var n=e(this);r||(r=new PureCSSMatrix);var l=d(n,i),v=h(l,f(r));a.nativeanimation?(n.css(u(m(v),a.duration,a.easing)),p&&p()):function(e,n,r,a,i,s){n||(n=f(new PureCSSMatrix));t=(new Date).getTime(),o&&(clearInterval(o),o=null);a.easing&&(a.easingfunction=function(e,t){var o=[];if(e instanceof Array)o=e;else switch(e){case"linear":o=[0,0,1,1];break;case"ease":o=[.25,.1,.25,1];break;case"ease-in":o=[.42,0,1,1];break;case"ease-out":o=[0,0,.58,1];break;case"ease-in-out":o=[.42,0,.58,1]}return function(e){return function(e,t,o,n,r,a){var i=0,s=0,l=0,u=0,c=0,f=0;function m(e){return((i*e+s)*e+l)*e}return i=1-(l=3*t)-(s=3*(n-t)-l),u=1-(f=3*o)-(c=3*(r-o)-f),function(e,t){return o=function(e,t){var o,n,r,a,u,c,f;function d(e){return e>=0?e:0-e}for(r=e,c=0;c<8;c++){if(d(a=m(r)-e)<t)return r;if(d(u=(3*i*(f=r)+2*s)*f+l)<1e-6)break;r-=a/u}if(n=1,(r=e)<(o=0))return o;if(r>n)return n;for(;o<n;){if(d((a=m(r))-e)<t)return r;e>a?o=r:n=r,r=.5*(n-o)+o}return r}(e,t),((u*o+c)*o+f)*o;var o}(e,function(e){return 1/(200*e)}(a))}(e,o[0],o[1],o[2],o[3],t)}}(a.easing,a.duration));c(e,n,r,a,i),s&&s();o=setInterval(function(){c(e,n,r,a,i)},1)}(n,l,v,a,s,p)})},e.fn.setTransformation=function(t){this.each(function(){var o=e(this),n=h(d(o),f(t));o.css(u(m(n)))})}}(jQuery),function(e){"use strict";var t=e.zoomooz.helpers,o=["duration","easing","nativeanimation"];function n(e,t){var o=e.data("original-scroll");return o||(o={elem:t,x:0,"y:":0}),o}function r(e,t,o){return[e.a*t+e.c*o+e.e,e.b*t+e.d*o+e.f]}function a(t){var o="width:4px;height:4px;background-color:red;position:absolute;margin-left:-2px;margin-top:-2px;",n='<div class="debuglabel" style="'+(o+="left:"+t[0]+"px;top:"+t[1]+"px;")+'"></div>';e("#debug").append(n)}function i(t,o){var n=t[0];if(!n||!n.ownerDocument)return null;var r,a,i=new PureCSSMatrix;if(n===n.ownerDocument.body){var s=jQuery.offset.bodyOffset(n);return r=(r=new PureCSSMatrix).translate(s.left,s.top),i=i.multiply(r)}jQuery.offset.initialize?(jQuery.offset.initialize(),a={fixedPosition:jQuery.offset.supportsFixedPosition,doesNotAddBorder:jQuery.offset.doesNotAddBorder,doesAddBorderForTableAndCells:jQuery.support.doesAddBorderForTableAndCells,subtractsBorderForOverflowNotVisible:jQuery.offset.subtractsBorderForOverflowNotVisible}):a=jQuery.support;var u,c,f=n.offsetParent,m=n.ownerDocument,d=m.documentElement,h=m.body,p=o[0],v=m.defaultView;c=v?v.getComputedStyle(n,null):n.currentStyle;var g=n.offsetTop,x=n.offsetLeft,y=l().translate(x,g);for(i=(y=y.multiply(l(n))).multiply(i);(n=n.parentNode)&&n!==p&&(g=0,x=0,!a.fixedPosition||"fixed"!==c.position);)u=v?v.getComputedStyle(n,null):n.currentStyle,g-=n.scrollTop,x-=n.scrollLeft,n===f&&(g+=n.offsetTop,x+=n.offsetLeft,!a.doesNotAddBorder||a.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(n.nodeName)||(g+=parseFloat(u.borderTopWidth)||0,x+=parseFloat(u.borderLeftWidth)||0),f=n.offsetParent),a.subtractsBorderForOverflowNotVisible&&"visible"!==u.overflow&&(g+=parseFloat(u.borderTopWidth)||0,x+=parseFloat(u.borderLeftWidth)||0),c=u,n.offsetParent==p&&(g-=parseFloat(e(n.offsetParent).css("margin-top"))||0,x-=parseFloat(e(n.offsetParent).css("margin-left"))||0),i=(y=(y=l().translate(x,g)).multiply(l(n))).multiply(i);g=0,x=0,"relative"!==c.position&&"static"!==c.position||(g+=h.offsetTop,x+=h.offsetLeft),a.fixedPosition&&"fixed"===c.position&&(g+=Math.max(d.scrollTop,h.scrollTop),x+=Math.max(d.scrollLeft,h.scrollLeft));var b=(new PureCSSMatrix).translate(x,g);return i=i.multiply(b)}function s(e){return Number(e).toFixed(6)}function l(e){var o=t.getElementTransform(e);return o?new PureCSSMatrix(o):new PureCSSMatrix}!function(){var o=document.createElement("style");o.type="text/css";var n="";t.forEachPrefix(function(e){n+=e+"transform-origin: 0 0;"},!0),o.innerHTML="html {height:100%;}.noScroll{overflow:hidden !important;}* {"+n+"}",document.getElementsByTagName("head")[0].appendChild(o),e(document).ready(function(){var t=window.innerWidth-e("body").width();o.innerHTML+="body.noScroll,html.noScroll body{margin-right:"+t+"px;}"})}(),e.zoomooz||(e.zoomooz={}),e.zoomooz.setup=function(t){var o,n;e.zoomooz.defaultSettings=jQuery.extend((o={targetsize:.9,scalemode:"both",root:e(document.body),debug:!1,animationendcallback:null,closeclick:!1},n=void 0!==window.mozInnerScreenX,o.scrollresetbeforezoom=n,o),t)},e.fn.zoomSettings=function(t){var n;return this.each(function(){var r=e(this);n=function(t,n){var r=jQuery.extend({},n);e.zoomooz.defaultSettings||e.zoomooz.setup();var a,i=e.zoomooz.defaultSettings,s=jQuery.extend({},r);for(a in i)i.hasOwnProperty(a)&&!s[a]&&(s[a]=t.data(a));for(var l=0;l<o.length;l++)a=o[l],s[a]||(s[a]=t.data(a));return jQuery.extend({},i,s)}(r,t)}),n},e.fn.zoomTo=function(o,l){return this.each(function(){var u=e(this);l||(o=u.zoomSettings(o)),function(o,r){var a,l,u=r.scrollresetbeforezoom,c=null;f=r.root,m=f.parent(),o[0]===f[0]?c=n(f,m):f.data("original-scroll")?u||(c=n(f,m)):(a=!0,c=function(o,n,r){var a=o.scrollTop(),i=o.scrollLeft(),s=o;a||(a=n.scrollTop(),i=n.scrollLeft(),s=n);var l={elem:s,x:i,y:a};o.data("original-scroll",l),e(document).on("touchmove",function(e){e.preventDefault()});var u="translate(-"+i+"px,-"+a+"px)";return t.forEachPrefix(function(e){o.css(e+"transform",u)}),s.addClass("noScroll"),r&&(l.animationstartedcallback=function(){s[0]==document.body||s[0]==document?window.scrollTo(0,0):(s.scrollLeft(0),s.scrollTop(0))}),l}(f,m,u));var f,m;var d=null;h=r.root,p=e(h).parent(),v=p.width(),g=p.height()/2,x=s(v/2)+"px "+s(g)+"px",t.forEachPrefix(function(e){h.css(e+"transform-origin",x)});var h,p,v,g,x;var y=null;if(o[0]!==r.root[0]){var b=i(o,r.root).inverse();u||(y=c),l=function(t,o,n,r){var a,i=r.targetsize,s=r.scalemode,l=r.root,u=e(l).parent(),c=u.width(),f=u.height(),m=c/t.outerWidth(),d=f/t.outerHeight();if("width"==s)a=i*m;else if("height"==s)a=i*d;else if("both"==s)a=i*Math.min(m,d);else{if("scale"!=s)return void console.log("wrong zoommode");a=i}var h=(c-t.outerWidth()*a)/2,p=(f-t.outerHeight()*a)/2,v=c/2,g=f/2,x=-parseFloat(l.css("margin-left"))||0,y=-parseFloat(l.css("margin-top"))||0,b=new PureCSSMatrix;n&&(b=b.translate(n.x,n.y));return b.translate(x,y).translate(-v,-g).translate(h,p).scale(a,a).multiply(o).translate(v,g)}(o,b,y,r),r.animationendcallback&&(d=function(){r.animationendcallback.call(o[0])})}else u&&(l=(new PureCSSMatrix).translate(-c.x,-c.y)),d=function(){var t=e(r.root),n=c.elem;n.removeClass("noScroll"),t.setTransformation(new PureCSSMatrix),t.data("original-scroll",null),e(document).off("touchmove"),u&&(n[0]==document.body||n[0]==window?window.scrollTo(c.x,c.y):(n.scrollLeft(c.x),n.scrollTop(c.y))),r.animationendcallback&&r.animationendcallback.call(o[0])};var z=null;u&&c&&c.animationstartedcallback&&(z=c.animationstartedcallback);a||(y=!1);e(r.root).animateTransformation(l,r,y,d,z)}(u,o),o.debug?(0===e("#debug").length?e(o.root).append('<div id="debug"><div>'):e("#debug").html(""),function(e,t){var o=i(e,t.root).elements();a(r(o,0,0)),a(r(o,0,e.outerHeight())),a(r(o,e.outerWidth(),e.outerHeight())),a(r(o,e.outerWidth(),0))}(u,o)):0!==e("#debug").length&&e("#debug").html("")}),this}}(jQuery),function(e){"use strict";e.zoomooz||(e.zoomooz={});var t=e.zoomooz.helpers;e.fn.zoomTarget=function(t){this.each(function(){var o=e(this).zoomSettings(t);!function t(o,n,r){o.addClass("zoomTarget");r.animationendcallback||(r.closeclick?r.animationendcallback=function(){e(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),o.addClass("selectedZoomTarget")}:r.animationendcallback=function(){e(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),o.addClass("selectedZoomTarget zoomNotClickable")});var a=n.closest(".zoomContainer");0!==a.length&&(r.root=a);var i=r.root;if(!i.hasClass("zoomTarget")){var s=i.zoomSettings({});s.animationendcallback=function(){var t=e(this);e(".selectedZoomTarget").removeClass("selectedZoomTarget zoomNotClickable"),t.addClass("selectedZoomTarget zoomNotClickable"),t.parent().addClass("selectedZoomTarget zoomNotClickable")},t(i,i,s),t(i.parent(),i,s),i.dblclick()}o.on("dblclick",function(e){r.closeclick&&n.hasClass("selectedZoomTarget")?r.root.dblclick():n.zoomTo(r),e.stopPropagation()})}(e(this),e(this),o)})},function(){var e=document.createElement("style");function o(e){var o="-webkit-touch-callout: "+(e?"default":"none")+";";return t.forEachPrefix(function(t){o+=t+"user-select:"+(e?"text":"none")+";"},!0),o}e.type="text/css",e.innerHTML=".zoomTarget{"+o(!1)+"}.zoomTarget:hover{cursor:pointer!important;}.zoomNotClickable{"+o(!0)+"}.zoomNotClickable:hover{cursor:auto!important;}.zoomContainer{position:relative;padding:1px;margin:-1px;}",document.getElementsByTagName("head")[0].appendChild(e)}(),e(document).ready(function(){e(".zoomTarget").zoomTarget()})}(jQuery),function(e){"use strict";e.zoomooz||(e.zoomooz={}),e.fn.zoomContainer=function(e){},e(document).ready(function(){e(".zoomContainer").zoomContainer()})}(jQuery),function(e){e.zoomooz||(e.zoomooz={});e.zoomooz.helpers;e.fn.zoomButton=function(t){this.each(function(){var o=function(t,o){var n={type:"next",root:e(document.body),wrap:"true"},r=jQuery.extend({},o);for(var a in n)n.hasOwnProperty(a)&&!r[a]&&(n[a]instanceof jQuery?r[a]=e(t.data(a)):r[a]=t.data(a));return jQuery.extend({},n,r)}(e(this),t);!function(e,t){var o;e.addClass("zoomButton"),o=t.root.hasClass("zoomContainer")?t.root:t.root.find(".zoomContainer");var n=function(){var e=jQuery.makeArray(o.find(".zoomTarget"));function t(t){return e.indexOf(t)}return{next:function(o){var n=t(o)+1;return n<e.length&&0!==n?e[n]:null},prev:function(o){var n=t(o)-1;return n<0?null:e[n]},last:function(){return e[e.length-1]},first:function(){return e[0]}}}();e.on("dblclick",function(e){var r,a=!0,i=o.find(".selectedZoomTarget");switch(0===i.length&&(i=n.first()),t.type){case"close":r=o;break;case"prev":null===(r=n.prev(i[0]))&&(t.wrap?r=n.last():a=!1);break;case"next":default:null===(r=n.next(i[0]))&&(t.wrap?r=n.first():a=!1)}a&&r.dblclick(),e.stopPropagation()})}(e(this),o)})},e(document).ready(function(){e(".zoomButton").zoomButton()})}(jQuery);